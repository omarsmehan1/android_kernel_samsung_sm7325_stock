name: "ğŸš€ NovaKernel KSU Build"

# ÙŠØ¸Ù‡Ø± Ø§Ø³Ù… Ø§Ù„ØªØ´ØºÙŠÙ„ Ø«Ø§Ø¨ØªÙ‹Ø§ Ù„Ø¬Ù‡Ø§Ø² a73xq
run-name: "Build NovaKernel for a73xq ğŸ“±"

on:
  workflow_dispatch: {}

jobs:
  build:
    name: "Build for a73xq"
    runs-on: ubuntu-latest

    steps:
      - name: "ğŸ“¥ Clone repository"
        uses: actions/checkout@v4
        with:
          fetch-depth: 1

      - name: "Set up permissions for build script"
        run: chmod +x build_ksu.sh

      - name: "ğŸ“¦ Install dependencies and prepare environment (a73xq)"
        run: ./build_ksu.sh deps a73xq

      - name: "ğŸ› ï¸ Fetch toolchain and AnyKernel3"
        run: ./build_ksu.sh tools

      - name: "ğŸ§¬ Integrate KernelSU & SUSFS"
        run: ./build_ksu.sh ksu

      - name: "ğŸ—ï¸ Compile NovaKernel (a73xq)"
        run: ./build_ksu.sh build a73xq

      - name: "ğŸ Package into AnyKernel3"
        run: ./build_ksu.sh pack

      - name: "ğŸ“¤ Upload packaged artifact"
        uses: actions/upload-artifact@v4
        with:
          name: "NovaKernel-a73xq-KSU-${{ github.run_id }}"
          path: ${{ github.workspace }}/toolchains/RIO/work_ksu/*
          compression-level: 9
